{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <!-- Profile Header -->
  <div class="text-center mb-4">
    <i class="bi bi-person-circle text-primary" style="font-size:4rem;"></i>
    <h2 class="fw-bold mt-2">My Profile</h2>
    <p class="text-muted">Manage your account details and security</p>
  </div>

  <!-- Profile Info -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-header bg-primary text-white fw-semibold">
      <i class="bi bi-info-circle me-2"></i> Profile Information
    </div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item"><i class="bi bi-person-fill me-2 text-secondary"></i><strong>Name:</strong> {{ user.fname }} {{ user.lname }}</li>
      <li class="list-group-item"><i class="bi bi-envelope-fill me-2 text-secondary"></i><strong>Email:</strong> {{ user.email }}</li>
      <li class="list-group-item"><i class="bi bi-telephone-fill me-2 text-secondary"></i><strong>Phone:</strong> {{ user.phone }}</li>
      <li class="list-group-item"><i class="bi bi-calendar-date-fill me-2 text-secondary"></i><strong>DOB:</strong> {{ user.dob }}</li>
      <li class="list-group-item"><i class="bi bi-geo-alt-fill me-2 text-secondary"></i><strong>Town:</strong> {{ user.town }}</li>
      <li class="list-group-item"><i class="bi bi-map-fill me-2 text-secondary"></i><strong>County:</strong> {{ user.county }}</li>
    </ul>
  </div>

  <!-- Change Password -->
  <div class="card shadow-sm border-0">
    <div class="card-header bg-warning text-dark fw-semibold">
      <i class="bi bi-shield-lock-fill me-2"></i> Change Password
    </div>
    <div class="card-body">
      <form method="POST">
        <div class="mb-3">
          <label for="new_pass" class="form-label fw-semibold">New Password</label>
          <div class="input-group">
            <input type="password" class="form-control rounded-start" id="new_pass" name="new_pass"
                   placeholder="Enter new password" required>
            <button class="btn btn-outline-secondary rounded-end" type="button" id="togglePassword">
              <i class="bi bi-eye"></i>
            </button>
          </div>
        </div>
        <div class="d-grid">
          <button type="submit" class="btn btn-warning fw-bold">
            <i class="bi bi-arrow-repeat me-2"></i> Update Password
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- JS for Password Toggle -->
<script>
  document.getElementById('togglePassword').addEventListener('click', function () {
    const passwordField = document.getElementById('new_pass');
    const icon = this.querySelector('i');
    if (passwordField.type === "password") {
      passwordField.type = "text";
      icon.classList.remove("bi-eye");
      icon.classList.add("bi-eye-slash");
    } else {
      passwordField.type = "password";
      icon.classList.remove("bi-eye-slash");
      icon.classList.add("bi-eye");
    }
  });
</script>
{% endblock %}
